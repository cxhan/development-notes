(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{880:function(s,a,t){"use strict";t.r(a);var e=t(86),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"docker入门教程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker入门教程"}},[s._v("#")]),s._v(" Docker入门教程")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("阮一峰的Docker入门教程"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/lph970417/p/12121011.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker私有仓库push"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"docker基础命令总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker基础命令总结"}},[s._v("#")]),s._v(" Docker基础命令总结")]),s._v(" "),t("p",[s._v("登录私有Docker镜像仓库")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" login -u "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("userName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("domainName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("拉取镜像(需要先在客户端配置registry-mirrors包含私有镜像仓库，然后再执行拉取命令)")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"registry-mirrors"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://aijuoso5.mirror.aliyuncs.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("imageName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("拉取镜像之后就可以在本地查看local镜像")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])])]),t("p",[s._v("镜像需要run或者start之后才可以在容器中查看,下面的8888是宿主机的端口号，80是镜像expose的端口号，一般前端项目基础镜像是nginx的alpine版本(nginx:1.13.12-alpine),需要expose 80端口,name可以不指定由Docker service自动生成")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("containerName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("  -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),s._v(":80 -d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("imageName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("查看local容器")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" container "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" 或者 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n")])])]),t("p",[s._v("Docker镜像打包,后面的点是Dockerfile所在路径")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" build -t "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("imageName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])])]),t("p",[s._v("Docker镜像发布,发布到私有镜像仓库需要修改docker的配置文件，然后再push，如果不修改配置文件，会push到Docker官方的hub上，开源的比较流行的Docker私有镜像仓库有harbor，其仓库配置文件为harbor.yml，修改其内容，restart即可")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" push "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("imageName"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("一般前后端分离的项目Dockerfile如下，daemon配置项的意思是执行daemon进程，让其脱离terminal执行，这样子关闭terminal也不会结束进程，另外还可以配置.dockerignore文件，让docker忽略对应文件或目录，在打包镜像的时候提高检索效率")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("FROM nginx:1.13.12-alpine\nCOPY dist/ /usr/share/nginx/html\nEXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\nCMD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-g"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"daemon off;"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);